@model IEnumerable<ContactManagement.Models.ContactViewModel>

@{
    ViewBag.Title = "Index";
}

<link href="../vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
<script src="../vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var serviceURL = '@Url.Action("GetContactListWithPagination", "Contact")';

        $('#myTable').DataTable({
            columns: [
                    { 'data': 'FirstName' },
                    { 'data': 'LastName' },
                    { 'data': 'EmailId' },
                    { 'data': 'PhoneNumber' },
                    {
                        'data': 'Status',
                        render: function (data, type, row) {
                            console.log(data);
                            switch (data) {
                                case true: return 'Active'; break;
                                case false: return 'Inactive'; break;
                                default: return 'N/A'; break;
                            }
                        }
                    },
                    { 'data': 'Address' },
                    {
                        "mRender": function (data, type, row) {
                            return '<b><a href=./Edit?pid=1>Edit</a>';
                        }
                    }
            ],
            "processing": true,
            bServerSide: true,
            sAjaxSource: serviceURL,
            sServerMethod: 'get'
        });
    });
</script>
<style>
    #myTable_processing {
        width: 35%;
        height: 50px;
        border-color: #7f7f7f;
        background-color: #73879C;
        color: white;
        box-shadow: 8px 8px 8px #aaaaaa;
        align-content: center;
        font: bold;
    }
</style>
<h2>Contact Master</h2>
<button class="btn btn-primary" style="float:right;" type="reset" onclick="location.href='@Url.Action("Create", "Contact")'">Create User</button>
<table class="table table-striped table-bordered">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EmailId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PhoneNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Status)
        </th>
        <th style="width: 250px !important;">
            @Html.DisplayNameFor(model => model.Address)
        </th>
        <th>Actions</th>
    </tr>

    @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EmailId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PhoneNumber)
                </td>
                <td>
                    @if (item.Status)
                    {
                        <p>Yes</p>
                    }
                    else
                    {
                        <p>No</p>
                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Address)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.ContactId }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.ContactId })
                </td>
            </tr>
        }

        @if (Model.Count() == 0)
        {
            <tr>
                <td colspan="6" style="text-align: center;">
                    <b>No Records to display!!</b>
                </td>
            </tr>
        }

</table>
